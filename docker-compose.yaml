version: '3'
  
services:
  build:
    profiles: ['build']
    build: .
    image: darlon/django:0.1
   
  init:
    profiles: ['init']
    image: darlon/django:0.1
    volumes:
      - ./data:/data
    working_dir: /data
    command: django-admin startproject app /data/
    
  run:
    image: darlon/django:0.1
    ports:
      - "8000:8000"
    volumes:
      - ./data:/data
    working_dir: /data
    command: python3 /data/manage.py runserver 0.0.0.0:8000
    
